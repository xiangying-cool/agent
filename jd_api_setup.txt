====================================================================
京东联盟API配置指南
====================================================================

您的京东AppKey已配置完成，现在需要配置AppSecret来启用签名功能。

1. 获取AppSecret
-------------------------------------------------------------------
访问: https://union.jd.com/myTools/myApi
在"我的API"页面可以看到:
  - AppKey (已配置): 6ef3fbb8dfe5d8e2957b76cbf1e4f9572f33dad4b35487b5032d598d18effa2b4f40d5377c5544e5
  - AppSecret (需要配置): 点击"查看"按钮获取

2. 配置AppSecret
-------------------------------------------------------------------
方式1: 使用环境变量 (推荐，更安全)
--------------------------------------
Windows PowerShell:
  $env:JD_APP_SECRET="您的AppSecret"
  python app.py

Linux/Mac:
  export JD_APP_SECRET="您的AppSecret"
  python app.py

方式2: 修改配置文件
--------------------------------------
编辑 external_api_config.py，找到:
  "app_secret": os.getenv("JD_APP_SECRET", ""),

改为:
  "app_secret": "您的AppSecret",

注意: 生产环境不建议这样做，密钥会暴露在代码中

3. 测试配置
-------------------------------------------------------------------
配置完成后运行:
  python external_api_manager.py

如果看到 "✅ 京东API签名助手已初始化"，说明配置成功！

4. 使用示例
-------------------------------------------------------------------
from external_api_manager import external_api_manager

# 查询商品价格
result = external_api_manager.get_product_price("海尔空调")
print(f"商品: {result['product']}")
for price in result['prices']:
    print(f"{price['platform']}: ¥{price['price']}")

5. API功能说明
-------------------------------------------------------------------
已实现的京东API方法:
  - query_goods: 商品搜索
  - query_goods_promotiongoodsinfo: 商品推广信息(含价格)
  - get_material_goods: 联盟推广商品

签名机制:
  - 自动生成MD5签名
  - 符合京东API规范
  - 参数自动排序和拼接

6. 常见问题
-------------------------------------------------------------------
Q: 为什么返回模拟数据?
A: 可能原因:
   1. AppSecret未配置
   2. AppSecret配置错误
   3. 京东API返回错误

Q: 如何查看详细错误?
A: 运行时会在控制台输出错误信息，例如:
   "京东API错误: 参数错误"
   "京东API调用异常: ..."

Q: 京东API有调用限制吗?
A: 有的，具体限制请查看京东联盟后台的接口文档。

====================================================================
需要帮助? 查看京东联盟API文档: https://union.jd.com/helpcenter
====================================================================
