# ğŸ§ª æ–°åŠŸèƒ½å®Œæ•´æµ‹è¯•æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [å¯åŠ¨é¡¹ç›®](#1-å¯åŠ¨é¡¹ç›®)
2. [æµ‹è¯•æ¨èç®—æ³•ä¸å›¾è¡¨å¯è§†åŒ–](#2-æµ‹è¯•æ¨èç®—æ³•ä¸å›¾è¡¨å¯è§†åŒ–)
3. [æµ‹è¯•æµå¼è¾“å‡º](#3-æµ‹è¯•æµå¼è¾“å‡º)
4. [æµ‹è¯•æ’ä»¶ç³»ç»Ÿ](#4-æµ‹è¯•æ’ä»¶ç³»ç»Ÿ)
5. [å¸¸è§é—®é¢˜](#5-å¸¸è§é—®é¢˜)

---

## 1ï¸âƒ£ å¯åŠ¨é¡¹ç›®

### æ­¥éª¤ 1: åœæ­¢æ—§æœåŠ¡
```powershell
taskkill /F /IM python.exe
```

### æ­¥éª¤ 2: å¯åŠ¨æ–°æœåŠ¡
```powershell
cd e:\shensibeiai
python app.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ä»·æ ¼æ¯”è¾ƒæ’ä»¶åˆå§‹åŒ–...
âœ“ æ’ä»¶å·²åŠ è½½: price_comparator v1.0.0
âœ“ æ’ä»¶å·²åŠ è½½: report_generator v1.0.0
æ­£åœ¨åˆå§‹åŒ–æ”¿ç­–å’¨è¯¢æ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆå§‹åŒ–å®Œæˆï¼
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

## 2ï¸âƒ£ æµ‹è¯•æ¨èç®—æ³•ä¸å›¾è¡¨å¯è§†åŒ–

### æ–¹å¼ 1: é€šè¿‡å‰ç«¯ç•Œé¢ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€æµè§ˆå™¨**
   ```
   http://localhost:8000
   ```

2. **åˆ‡æ¢åˆ°"æ™ºèƒ½è§„åˆ’å¸ˆ"æ ‡ç­¾**
   - ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªçš„ Calculator å›¾æ ‡

3. **è®¾ç½®å‚æ•°**
   - é¢„ç®—æ»‘å—è°ƒæ•´åˆ°ï¼š**Â¥15,000**
   - æ„å‘å“ç±»ï¼šå¯é€‰æ‹©"å†°ç®±"ã€"æ´—è¡£æœº"ç­‰

4. **ç”Ÿæˆæ–¹æ¡ˆ**
   - ç‚¹å‡»"ç”Ÿæˆæœ€ä¼˜æ–¹æ¡ˆ"æŒ‰é’®
   - ç­‰å¾… 2-3 ç§’

5. **æŸ¥çœ‹ç»“æœ**
   
   **âœ… åº”è¯¥çœ‹åˆ°ï¼š**
   
   **æ–‡å­—éƒ¨åˆ†ï¼š**
   ```
   é€‰ä¸­6ä»¶äº§å“ï¼Œæ€»è¡¥è´´ï¿¥1,825
   å®é™…å‡€æ”¯å‡ºï¿¥13,175
   èµ„é‡‘åˆ©ç”¨ç‡100.0%
   ```
   
   **æ¨èç»„åˆæ¸…å•ï¼š**
   ```
   1. æ‰‹æœº (Â¥4000) â†’ è¡¥è´´Â¥500
   2. æ‰‹æœº (Â¥2000) â†’ è¡¥è´´Â¥300
   3. å¹³æ¿ (Â¥2500) â†’ è¡¥è´´Â¥300
   4. å¹³æ¿ (Â¥1500) â†’ è¡¥è´´Â¥225
   5. æ´—è¡£æœº (Â¥1500) â†’ è¡¥è´´Â¥150
   6. å†°ç®± (Â¥3500) â†’ è¡¥è´´Â¥350
   ```
   
   **ğŸ“Š ä¸‰å¼ å›¾è¡¨ï¼š**
   
   - **ä»·æ ¼å¯¹æ¯”æŸ±çŠ¶å›¾**
     - è“è‰²æŸ±ï¼šåŸä»·
     - ç»¿è‰²æŸ±ï¼šå®ä»˜ä»·
     - ç°è‰²æŸ±ï¼šè¡¥è´´
     - ï¼ˆå¦‚æœæœ‰ä»·æ ¼æ¯”è¾ƒæ•°æ®ï¼Œè¿˜ä¼šæ˜¾ç¤ºäº¬ä¸œä»·æ ¼ï¼‰
   
   - **è¡¥è´´å æ¯”é¥¼å›¾**
     - æ˜¾ç¤ºå„äº§å“è¡¥è´´å æ¯”
     - ä¸åŒé¢œè‰²æ‰‡å½¢
     - é¼ æ ‡æ‚¬åœæ˜¾ç¤ºç™¾åˆ†æ¯”
   
   - **èµ„é‡‘åˆ©ç”¨ç‡æŠ˜çº¿å›¾**
     - ä¸‰ä¸ªç‚¹ï¼šé¢„ç®— â†’ å®é™…èŠ±è´¹ â†’ è¡¥è´´åèŠ±è´¹
     - è“è‰²æŠ˜çº¿è¿æ¥

6. **æˆªå›¾ä¿å­˜**
   - è¿™æ˜¯æœ€ç›´è§‚çš„æµ‹è¯•ç»“æœå±•ç¤º

---

### æ–¹å¼ 2: é€šè¿‡ API ç›´æ¥æµ‹è¯•

```bash
# PowerShell ä¸­æ‰§è¡Œ
$body = @{
    question = "æˆ‘æœ‰15000å…ƒé¢„ç®—ï¼Œæ¨èä¸€ä¸ªæœ€åˆ’ç®—çš„å®¶ç”µæ¢æ–°æ–¹æ¡ˆ"
    return_sources = $true
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8000/api/query" `
    -Method POST `
    -ContentType "application/json" `
    -Body $body | ConvertTo-Json -Depth 10
```

**é¢„æœŸè¿”å›ï¼ˆå…³é”®å­—æ®µï¼‰ï¼š**
```json
{
  "recommendation": {
    "selected_products": [
      {"name": "æ‰‹æœº", "price": 4000, "subsidy": 500},
      {"name": "æ‰‹æœº", "price": 2000, "subsidy": 300},
      // ... å…¶ä»–äº§å“
    ],
    "total_subsidy": 1825,
    "final_cost": 13175,
    "utilization_rate": 1.0,
    "is_optimal": true
  },
  "price_comparison": {
    "status": "success",
    "comparisons": [
      {
        "product": "æ‰‹æœº",
        "jd_price": 2999,
        "taobao_price": 2899,
        "best_platform": "taobao",
        "savings": 100
      }
    ],
    "total_savings": 300
  },
  "algorithm": "dp",
  "is_optimal": true
}
```

---

## 3ï¸âƒ£ æµ‹è¯•æµå¼è¾“å‡ºï¼ˆSSEï¼‰

### æ–¹å¼ 1: æµè§ˆå™¨ç›´æ¥è®¿é—®

```
http://localhost:8000/api/stream_query?question=æµå—å¸‚å®¶ç”µè¡¥è´´æ ‡å‡†æ˜¯å¤šå°‘
```

**é¢„æœŸæ•ˆæœï¼š**
- æµè§ˆå™¨ä¼šé€æ­¥æ˜¾ç¤ºå†…å®¹
- æ¯éš”å‡ åæ¯«ç§’è¾“å‡ºä¸€æ®µæ–‡å­—
- ç±»ä¼¼"æ‰“å­—æœº"æ•ˆæœ

**åº”è¯¥çœ‹åˆ°çš„æµå¼æ•°æ®ï¼š**
```
data: {"type":"start","message":"å¼€å§‹å¤„ç†é—®é¢˜..."}

data: {"type":"intent","message":"æ­£åœ¨è¯†åˆ«é—®é¢˜æ„å›¾..."}

data: {"type":"retrieval","message":"æ­£åœ¨æ£€ç´¢ç›¸å…³æ”¿ç­–..."}

data: {"type":"generating","message":"æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ..."}

data: {"type":"chunk","content":"æµå—å¸‚å®¶"}

data: {"type":"chunk","content":"ç”µè¡¥è´´æ ‡"}

data: {"type":"chunk","content":"å‡†ä¸ºï¼šä¸€"}

... (é€å­—è¾“å‡º)

data: {"type":"complete","result":{...å®Œæ•´ç»“æœ...}}
```

---

### æ–¹å¼ 2: PowerShell æµ‹è¯•ï¼ˆæŸ¥çœ‹åŸå§‹ SSE æµï¼‰

```powershell
# ä½¿ç”¨ curl æµ‹è¯•ï¼ˆå¦‚æœå·²å®‰è£…ï¼‰
curl "http://localhost:8000/api/stream_query?question=æµ‹è¯•æµå¼è¾“å‡º"

# æˆ–ä½¿ç”¨ Invoke-WebRequest
Invoke-WebRequest -Uri "http://localhost:8000/api/stream_query?question=æµ‹è¯•" `
    -Method GET `
    -Headers @{"Accept"="text/event-stream"}
```

---

### æ–¹å¼ 3: å‰ç«¯é›†æˆæµ‹è¯•ï¼ˆå¯é€‰ï¼‰

åˆ›å»ºæµ‹è¯• HTML æ–‡ä»¶ï¼š

```html
<!-- test_sse.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SSE æµå¼è¾“å‡ºæµ‹è¯•</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        #output { border: 1px solid #ccc; padding: 10px; min-height: 200px; }
        #status { color: blue; font-weight: bold; }
    </style>
</head>
<body>
    <h2>æµå¼è¾“å‡ºæµ‹è¯•</h2>
    <div id="status">å‡†å¤‡å°±ç»ª</div>
    <div id="output"></div>
    
    <script>
        const eventSource = new EventSource(
            'http://localhost:8000/api/stream_query?question=æµå—å¸‚è¡¥è´´æ ‡å‡†'
        );
        
        const output = document.getElementById('output');
        const status = document.getElementById('status');
        
        eventSource.onmessage = (event) => {
            const data = JSON.parse(event.data);
            
            if (data.type === 'start') {
                status.textContent = 'å¼€å§‹å¤„ç†...';
            } else if (data.type === 'chunk') {
                output.textContent += data.content;
            } else if (data.type === 'complete') {
                status.textContent = 'å®Œæˆï¼';
                eventSource.close();
            }
        };
        
        eventSource.onerror = () => {
            status.textContent = 'è¿æ¥é”™è¯¯';
            eventSource.close();
        };
    </script>
</body>
</html>
```

ä¿å­˜ååœ¨æµè§ˆå™¨æ‰“å¼€å³å¯æµ‹è¯•ã€‚

---

## 4ï¸âƒ£ æµ‹è¯•æ’ä»¶ç³»ç»Ÿ

### æµ‹è¯• 1: ä»·æ ¼æ¯”è¾ƒæ’ä»¶

#### æ–¹å¼ A: é€šè¿‡æµ‹è¯•è„šæœ¬
```powershell
cd e:\shensibeiai
python test_plugins.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
âœ“ æ’ä»¶å·²åŠ è½½: price_comparator v1.0.0
âœ“ æ’ä»¶å·²åŠ è½½: report_generator v1.0.0

æµ‹è¯•ä»·æ ¼æ¯”è¾ƒæ’ä»¶
çŠ¶æ€: success
æ€»èŠ‚çœ: Â¥300

ä»·æ ¼å¯¹æ¯”:
  å†°ç®±:
    äº¬ä¸œ: Â¥2999
    æ·˜å®: Â¥2899
    æœ€ä¼˜å¹³å°: taobao (èŠ‚çœÂ¥100)
```

---

#### æ–¹å¼ B: é›†æˆæµ‹è¯•ï¼ˆæ¨èæ–¹æ¡ˆè‡ªåŠ¨è°ƒç”¨ï¼‰

åœ¨å‰ç«¯"æ™ºèƒ½è§„åˆ’å¸ˆ"ä¸­ç”Ÿæˆæ–¹æ¡ˆåï¼ŒæŸ¥çœ‹åç«¯æ—¥å¿—ï¼š

**åº”è¯¥çœ‹åˆ°ï¼š**
```
[DEBUG Agent] æ¨èç»“æœ: 6ä»¶äº§å“, æ€»è¡¥è´´ï¿¥1825
âœ“ ä»·æ ¼æ¯”è¾ƒæ’ä»¶è¿è¡ŒæˆåŠŸ: æ€»èŠ‚çœï¿¥300
```

---

### æµ‹è¯• 2: æŠ¥å‘Šç”Ÿæˆæ’ä»¶

```python
# åœ¨ Python ä¸­æµ‹è¯•
from plugin_manager import PluginManager

manager = PluginManager()
manager.load_all_plugins()

# ç”Ÿæˆ PDF æŠ¥å‘Š
result = manager.execute_plugin("report_generator", {
    "recommendation": {
        "total_subsidy": 1825,
        "products": ["å†°ç®±", "æ´—è¡£æœº"]
    },
    "format": "pdf"
})

print(result)
# è¾“å‡º: {'status': 'success', 'filename': 'subsidy_report_20251211_*.pdf', ...}
```

---

### æµ‹è¯• 3: éªŒè¯æ’ä»¶æ•°æ®åœ¨å‰ç«¯æ˜¾ç¤º

1. ç”Ÿæˆæ¨èæ–¹æ¡ˆ
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
3. æŸ¥çœ‹ Network æ ‡ç­¾
4. æ‰¾åˆ° `/api/query` è¯·æ±‚
5. æŸ¥çœ‹ Response

**åº”è¯¥åŒ…å«ï¼š**
```json
{
  "price_comparison": {
    "comparisons": [
      {"product": "å†°ç®±", "jd_price": 2999, "taobao_price": 2899}
    ]
  }
}
```

6. å¦‚æœæœ‰ä»·æ ¼å¯¹æ¯”æ•°æ®ï¼Œå›¾è¡¨ä¸­ä¼šæ˜¾ç¤ºäº¬ä¸œä»·æ ¼ï¼ˆçº¢è‰²è™šçº¿ï¼‰

---

## 5ï¸âƒ£ å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ²¡æœ‰æ˜¾ç¤ºå›¾è¡¨ï¼Ÿ

**æ£€æŸ¥æ­¥éª¤ï¼š**
1. ç¡®è®¤å·²å®‰è£…ä¾èµ–ï¼š
   ```bash
   cd e:\shensibeiai\intelli-policy
   npm list chart.js react-chartjs-2
   ```

2. ç¡®è®¤å‰ç«¯å·²é‡æ–°æ„å»ºï¼š
   ```bash
   npm run build
   ```

3. åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl+F5 å¼ºåˆ¶åˆ·æ–°ï¼‰

4. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹é”™è¯¯

---

### Q2: æ¨èæ–¹æ¡ˆè¿”å›ç©ºç»“æœï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
- é¢„ç®—å¤ªä½ï¼ˆ< Â¥1500ï¼‰
- NER æå–é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
cd e:\shensibeiai
python app.py

# åœ¨æ—¥å¿—ä¸­æŸ¥æ‰¾ï¼š
# [DEBUG Agent] æå–é¢„ç®—: xxx, éœ€æ±‚: [...]
```

ç¡®ä¿é¢„ç®—æ­£ç¡®æå–ã€‚

---

### Q3: æµå¼è¾“å‡ºæ²¡æœ‰ååº”ï¼Ÿ

**æµ‹è¯•è¿æ¥ï¼š**
```bash
curl -N "http://localhost:8000/api/stream_query?question=test"
```

å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œæ£€æŸ¥ï¼š
- é˜²ç«å¢™è®¾ç½®
- åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
- ç«¯å£ 8000 æ˜¯å¦è¢«å ç”¨

---

### Q4: æ’ä»¶åŠ è½½å¤±è´¥ï¼Ÿ

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```
âœ— åŠ è½½æ’ä»¶å¤±è´¥ price_comparator: ...
```

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®è®¤æ’ä»¶æ–‡ä»¶å­˜åœ¨ï¼š
   ```
   e:\shensibeiai\plugins\price_comparator.py
   e:\shensibeiai\plugins\report_generator.py
   ```

2. æ£€æŸ¥ Python è·¯å¾„

3. é‡æ–°è¿è¡Œï¼š
   ```bash
   python test_plugins.py
   ```

---

## ğŸ“Š å®Œæ•´æµ‹è¯•æ¸…å•

| åŠŸèƒ½ | æµ‹è¯•æ–¹æ³• | é¢„æœŸç»“æœ | çŠ¶æ€ |
|------|---------|---------|------|
| **æ¨èç®—æ³•** | å‰ç«¯ç”Ÿæˆæ–¹æ¡ˆ | æ˜¾ç¤º6ä»¶äº§å“æ¸…å• | â¬œ |
| **ä»·æ ¼å¯¹æ¯”æŸ±çŠ¶å›¾** | æŸ¥çœ‹å›¾è¡¨é¢æ¿ | æ˜¾ç¤ºåŸä»·/å®ä»˜/è¡¥è´´ | â¬œ |
| **è¡¥è´´å æ¯”é¥¼å›¾** | æŸ¥çœ‹å›¾è¡¨é¢æ¿ | æ˜¾ç¤ºå½©è‰²æ‰‡å½¢ | â¬œ |
| **èµ„é‡‘åˆ©ç”¨ç‡å›¾** | æŸ¥çœ‹å›¾è¡¨é¢æ¿ | æ˜¾ç¤ºè“è‰²æŠ˜çº¿ | â¬œ |
| **æµå¼è¾“å‡º** | è®¿é—® stream_query | é€å­—æ˜¾ç¤ºç­”æ¡ˆ | â¬œ |
| **ä»·æ ¼æ¯”è¾ƒæ’ä»¶** | è¿è¡Œ test_plugins.py | æ˜¾ç¤ºäº¬ä¸œ/æ·˜å®ä»·æ ¼ | â¬œ |
| **æŠ¥å‘Šç”Ÿæˆæ’ä»¶** | è¿è¡Œ test_plugins.py | æ˜¾ç¤º PDF æ–‡ä»¶å | â¬œ |
| **æ’ä»¶é›†æˆ** | æŸ¥çœ‹åç«¯æ—¥å¿— | æ˜¾ç¤º"æ’ä»¶è¿è¡ŒæˆåŠŸ" | â¬œ |

---

## ğŸ¯ å¿«é€ŸéªŒè¯å‘½ä»¤

ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š

```powershell
# 1. å¯åŠ¨æœåŠ¡
cd e:\shensibeiai
Start-Process python -ArgumentList "app.py"

# ç­‰å¾… 3 ç§’
Start-Sleep -Seconds 3

# 2. æµ‹è¯•æ’ä»¶
python test_plugins.py

# 3. æµ‹è¯• API
Invoke-RestMethod -Uri "http://localhost:8000/api/query" `
    -Method POST `
    -ContentType "application/json" `
    -Body '{"question":"æˆ‘æœ‰15000å…ƒé¢„ç®—æ¨èæ–¹æ¡ˆ","return_sources":true}'

# 4. æµ‹è¯•æµå¼è¾“å‡º
curl -N "http://localhost:8000/api/stream_query?question=test"

# 5. æ‰“å¼€å‰ç«¯
Start-Process "http://localhost:8000"
```

---

## ğŸ“¸ æµ‹è¯•æˆªå›¾å‚è€ƒ

å®Œæˆæµ‹è¯•åï¼Œå»ºè®®æˆªå–ä»¥ä¸‹ç”»é¢ï¼š

1. **å‰ç«¯å®Œæ•´ç•Œé¢**ï¼ˆåŒ…å«ä¸‰å¼ å›¾è¡¨ï¼‰
2. **åç«¯æ—¥å¿—**ï¼ˆæ˜¾ç¤ºæ’ä»¶åŠ è½½æˆåŠŸï¼‰
3. **API è¿”å›æ•°æ®**ï¼ˆJSON æ ¼å¼ï¼‰
4. **æµå¼è¾“å‡ºè¿‡ç¨‹**ï¼ˆæµè§ˆå™¨æ˜¾ç¤ºï¼‰

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ç¯å¢ƒ
- æ—¥æœŸï¼š2025-12-11
- ç³»ç»Ÿï¼šWindows 25H2
- Pythonï¼š3.8
- Node.jsï¼š14+

## æµ‹è¯•ç»“æœ

### 1. æ¨èç®—æ³• âœ…
- é¢„ç®—ï¼šÂ¥15,000
- è¿”å›äº§å“ï¼š6ä»¶
- æ€»è¡¥è´´ï¼šÂ¥1,825
- èµ„é‡‘åˆ©ç”¨ç‡ï¼š100%

### 2. å›¾è¡¨å¯è§†åŒ– âœ…
- ä»·æ ¼å¯¹æ¯”å›¾ï¼šæ­£å¸¸æ˜¾ç¤º
- è¡¥è´´å æ¯”å›¾ï¼šæ­£å¸¸æ˜¾ç¤º
- åˆ©ç”¨ç‡å›¾ï¼šæ­£å¸¸æ˜¾ç¤º

### 3. æµå¼è¾“å‡º âœ…
- è¿æ¥æˆåŠŸ
- é€å­—æ˜¾ç¤ºæ­£å¸¸
- è¿›åº¦åé¦ˆæ¸…æ™°

### 4. æ’ä»¶ç³»ç»Ÿ âœ…
- ä»·æ ¼æ¯”è¾ƒï¼šè¿è¡ŒæˆåŠŸ
- æŠ¥å‘Šç”Ÿæˆï¼šè¿è¡ŒæˆåŠŸ
- é›†æˆè°ƒç”¨ï¼šæ­£å¸¸

## é—®é¢˜è®°å½•
ï¼ˆæ— ï¼‰

## å»ºè®®
ï¼ˆå¯é€‰ï¼‰
```

---

ç¥æµ‹è¯•é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜éšæ—¶åé¦ˆã€‚ğŸš€
